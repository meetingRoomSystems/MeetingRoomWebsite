{% extends "base.html" %}
{% load staticfiles %}

{% block style %}
<style>
  img.middle {
      vertical-align: middle;
      padding-left:5em;
  }
</style>
{% endblock style %}

{% block content %}
  <main>
    <h2>Welcome {{fullname}}</h2>
    <br>
    <h3>Upcoming Bookings</h3>
    <div class="row"  id="list1">
      {% if bookings != '[]' %}
      {% for book in bookings %}
        <div class="col s12 m7" id='l1_{{ forloop.counter }}' style="opacity: 0;">
          <div class="card horizontal hoverable z-depth-5">
            <div class="card-image">
              {% if book.room == '1' %}
               <img src="{% static 'room1.jpg' %}">
              {% elif book.room == '2' %}
               <img src="{% static 'room2.jpg' %}">
              {% elif book.room == '3' %}
               <img src="{% static 'room3.jpg' %}">
              {% elif book.room == '4' %}
               <img src="{% static 'room4.jpg' %}">
              {% endif %}
            </div>
            <div class="card-stacked">
              <div class="card-content">
                <p><b>Date</b> : {{book.booking_date}} <br><b>Time</b> : {{book.booking_start}} - {{book.booking_end}} ({{book.duration}} mins)<br><b>Room</b> : {{book.room}}<br>Meeting is with {{book.capacity}} people</p>
              </div>
              <div class="card-action">
                <a href="{% url 'delete' username book.booking_date book.booking_start book.room %}">Delete booking</a>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
      {% else %}
      <h4 style="font-size:30px">No Upcoming Bookings</h4>
      {% endif %}
    </div>

    <br><br>
    <h3>All bookings for today</h3>
    <div class="row" id="list2">
      {% if allBookings != '[]' %}
      {% for book in allBookings %}
        <div class="col s12 m6">
          <div class="card horizontal hoverable z-depth-5" id='l2_{{ forloop.counter }}' style="opacity: 0;">
            <div class="card-image">
              {% if book.room == '1' %}
               <img src="{% static 'room1.jpg' %}">
              {% elif book.room == '2' %}
               <img src="{% static 'room2.jpg' %}">
              {% elif book.room == '3' %}
               <img src="{% static 'room3.jpg' %}">
              {% elif book.room == '4' %}
               <img src="{% static 'room4.jpg' %}">
              {% endif %}
            </div>
            <div class="card-stacked">
              <div class="card-content">
                <p><b>By</b> : {{book.fullname}} <br><b>Time</b> : {{book.booking_start}} - {{book.booking_end}} ({{book.duration}} mins)<br><b>Room</b> : {{book.room}}<br>Meeting is with {{book.capacity}} people</p>
              </div>
            </div>
          </div>
        </div>
      {% endfor %}
      {% else %}
      <h4 style="font-size:30px">No Bookings for Today</h4>
      {% endif %}
    </div>
     <br><br><br>
  </main>

{% endblock content %}

{% block javascript %}

<script>
  window.onload = function(){
    {% if message %}
    Materialize.toast('{{message}}', 4000,'rounded');
    {% endif %}
    {% if deleted %}
    Materialize.toast('{{deleted}}', 4000,'rounded');
    {% endif %}
    display_ct();
    var options = [
      {% if bookings != '[]' %}
      {% for book in bookings %}
       {selector: '#l1_{{ forloop.counter }}', offset: 150, callback: function(el) {
         Materialize.fadeInImage($(el));
       } },
     {% endfor %}
     {% endif %}
     {% if allBookings != '[]' %}
     {% for book in allBookings %}
      {selector: '#l2_{{ forloop.counter }}', offset: 150, callback: function(el) {
        Materialize.fadeInImage($(el));
      } },
    {% endfor %}
    {% endif %}
   ];
   Materialize.scrollFire(options);
  }
</script>


{% endblock javascript %}
